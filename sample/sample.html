<!DOCTYPE HTML>
<html>
	<head>
		<script src="//d3js.org/d3.v3.min.js" charset="utf-8"></script>
		<script src="../dist/shogi-board.js" charset="utf-8"></script>
		<style>
		</style>
	</head>
	<body>
		<table id=theboard >
		</table>

		<script>
			var bd =
			[[["KY",1],["KE",1],["GI",1],["KI",1],["OU",1],["KI",1],["GI",1],["KE",1],["KY",1]]
			,[  null  ,["HI",1],  null  ,  null  ,  null  ,  null  ,  null  ,["KA",1],  null  ]
			,[["FU",1],["FU",1],["FU",1],["FU",1],["FU",1],["FU",1],["FU",1],["FU",1],["FU",1]]
			,[  null  ,  null  ,  null  ,  null  ,  null  ,  null  ,  null  ,  null  ,  null  ]
			,[  null  ,  null  ,  null  ,  null  ,  null  ,  null  ,  null  ,  null  ,  null  ]
			,[  null  ,  null  ,  null  ,  null  ,  null  ,  null  ,  null  ,  null  ,  null  ]
			,[["FU",0],["FU",0],["FU",0],["FU",0],["FU",0],["FU",0],["FU",0],["FU",0],["FU",0]]
			,[  null  ,["KA",0],  null  ,  null  ,  null  ,  null  ,  null  ,["HI",0],  null  ]
			,[["KY",0],["KE",0],["GI",0],["KI",0],["OU",0],["KI",0],["GI",0],["KE",0],["KY",0]]
			];
		</script>

		<script>(function() {
			var sel = d3.select("#theboard");
			sel.node().style.padding="11px 11px 10px"; // does not work
			sel.node().style.borderCollapse="collapse";
			sel.node().style.backgroundImage = "url(" + "../../" + ShogiBoard.preset.grid.dot_xy + ")";
			sel
				.selectAll("tr").data(bd)
				.enter().append("tr")
				.selectAll("td").data(function(d) { return d3.entries(d) })
				.enter().append("td")
				.attr("style", "margin: 0; padding: 0")
				.each(function(d) {
					var value = d['value'];
					var src;
					if(value) {
						src = "../../" + ShogiBoard.preset.piece.ryoko_torafu[value[0]][value[1]];
					} else {
						src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAwCAYAAACITIOYAAAAH0lEQVRo3u3BMQEAAADCoPVPbQZ/oAAAAAAAAAAAPgMgcAAB3kcvEQAAAABJRU5ErkJggg==";
					}
					var img = this.firstChild;
					if (img) {
						img.src = src;
					} else {
						img = document.createElement("img");
						img.src = src;
						this.appendChild(img);
					}
				})
			;
		})();</script>
	</body>
</html>
